<xml>

<setup name="androidNdk" />
    
<!-- Set architecture -->
<section if="HXCPP_X86">
  <set name="ARCH" value="-x86" />
  <set name="EXEPREFIX" value="i686-linux-android" />
</section>

<section unless="HXCPP_X86">
  <set name="ARCH" value="-v7" />
  <set name="EXEPREFIX" value="arm-linux-androideabi" />
</section>

<section if="HXCPP_ARM64">
  <set name="ARCH" value="-64"/>
  <set name="EXEPREFIX" value="aarch64-linux-android" />
</section>

<path name="${ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/${ANDROID_HOST}/bin" />

<set name="HXCPP_AR" value="arm-linux-androideabi-ar" />

<include name="toolchain/gcc-toolchain.xml"/>

<compiler id="android-gcc" exe="clang++">

  <exe name="clang++" />
  <flag value="--target=${EXEPREFIX}${PLATFORM_NUMBER}" />
  
  <!-- Paths -->
  <include name="toolchain/common-defines.xml" />
  <flag value="-I${HXCPP}/include"/>
  <flag value="-Iinclude"/>
  <objdir value="obj/android${OBJEXT}${ARCH}" />
    
  <!-- Macros -->
  <flag value="-DANDROID=ANDROID"/>
  <flag value="-DHX_ANDROID"/>
  <flag value="-DHXCPP_LOAD_DEBUG" if="HXCPP_LOAD_DEBUG"/>
  <flag value="-D${ANDROID_PLATFORM_DEFINE}"/>
    
  <!-- Options -->
  <flag value="-flto" if="HXCPP_OPTIMIZE_LINK" unless="debug"/>
  <flag value="-fpic"/>
  <flag value="-fvisibility=hidden"/>
  <flag value="-ffunction-sections"/>
  <flag value="-fstack-protector"/>
  <flag value="-fno-short-enums"/>
  <flag value="-Wno-overflow" />
  <flag value="-fomit-frame-pointer"/>
  <flag value="-fexceptions"/>
  <flag value="-fno-strict-aliasing"/>
  <flag value="-g" if="HXCPP_DEBUG_LINK"/>
  <flag value="-c"/>
    
  <ext value=".obj"/>

    <!--<section if="HXCPP_ARMV7">-->
    <!--<flag value="-mfpu=vfpv3-d16"  />-->
    <!--</section>-->
  
</compiler>


<linker id="dll" exe="clang++" >

  <exe name="clang++" />
  <flag value ="-shared" />
  <flag value="--target=${EXEPREFIX}${PLATFORM_NUMBER}" />

  <flag value ="-static-libstdc++" />
  <flag value ="-v" />
  <prefix value="lib"/>
  <lib name="-llog"/>
    
</linker>
    
</xml>
